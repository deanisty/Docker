# 镜像

* 容器 - Docker 的可执行文件。

* 镜像 - Docker 的源代码。

镜像是由文件系统叠加而成的。最低端是一个引导文件系统，bootfs，类似 Linux/Unix 的引导文件系统。

> Docker 用户不会和引导文件系统有什么交互，当一个容器启动时，它会被转移到内存中，而引导文件系统会被卸载（unmount），
> 留出更多的内存供 [initrd](https://www.ibm.com/developerworks/cn/linux/l-k26initrd/index.html) 磁盘镜像使用

第二层是根文件系统 rootfs，它位于引导文件系统之上。rootfsd 可以是一种或者多种操作系统

在传统的 Linux 引导过程中， root 文件系统会最先以只读的方式加载，当引导结束并完成了完整性检查之后，它才会被切换为读写模式。但是，在Docker里，
root 文件系统永远只是只读状态，并且 Docker 利用 联合加载 技术又会在 root 文件系统层之上加载更多的只读文件系统。

> 联合加载 是指一次同时加载多个文件系统，但是在外面只能看到一个文件系统。联合加载会将各层文件系统叠加到一起，这样最终的文件系统会包含所有的底层文件和目录

Docker 将这样的文件系统称为镜像。

一个镜像可以放到另一个镜像的底部。位于下面的镜像称为父镜像，最底部的镜像称为基础镜像。最后，当从一个镜像启动容器时，Docker 会在镜像的最顶层加载一个可读
写文件系统。在Docker中运行的程序就是在这个读写层中执行的。

如果感觉很迷惑，可以看下面的图

![image-level](http://img.dockerinfo.net/2016/08/20160819173838.png)

当Docker第一次启动一个容器时，读写层是空的，当文件系统发生变化时，这些变化都会应用在读写层上。比如，如果想修改一个文件，这个文件首先会从只读层复制到
读写层，该文件的只读版本依然存在，但是已经被读写层中的副本隐藏了。
